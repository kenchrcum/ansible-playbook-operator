operator:
  image:
    repository: kenchrcum/ansible-playbook-operator
    tag: "0.1.0"
    # Optional: pin image by digest for enhanced security and reproducibility
    # When digest is provided, it takes precedence over tag
    # Format: sha256:abc123def456...
    digest: ""
    pullPolicy: IfNotPresent
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi
  leaderElection: true
  watch:
    # one of: namespace|all
    scope: namespace
  metrics:
    enabled: false
    serviceMonitor:
      enabled: true
  serviceAccount:
    create: true
    name: ""

executorDefaults:
  image:
    repository: kenchrcum/ansible-runner
    tag: latest
    # Optional: pin image by digest for enhanced security and reproducibility
    # When digest is provided, it takes precedence over tag
    # Format: sha256:abc123def456...
    digest: ""
    pullPolicy: IfNotPresent
  serviceAccount:
    # Whether to create a separate ServiceAccount for executor Jobs
    create: true
    # Name of the executor ServiceAccount (auto-generated if empty)
    name: ""
    # RBAC preset for executor permissions: minimal (default), scoped, cluster-admin
    # minimal: least-privilege permissions for basic Ansible execution
    # scoped: extended permissions for cross-namespace operations
    # cluster-admin: full cluster permissions (use with extreme caution)
    rbacPreset: minimal
  cache:
    # Default cache strategy for repositories that don't specify one
    # Options: none, pvc
    strategy: none
    # Default PVC name when strategy is pvc
    pvcName: ""
    # Whether to create a PVC for caching (optional)
    createPVC: false
    # Storage size for the cache PVC when createPVC is true
    storageSize: "10Gi"
    # Storage class name for the cache PVC (optional)
    storageClassName: ""

rbac:
  # RBAC permission preset: minimal (default), scoped, or cluster-admin
  # minimal: least-privilege namespaced permissions for single-namespace operation
  # scoped: cross-namespace access for cluster-wide scenarios
  # cluster-admin: full cluster permissions (use with caution)
  preset: minimal

  # Enable cluster read permissions for Kopf preflight checks (CRDs, namespaces)
  # Only applies when preset is 'minimal'; ignored for other presets
  clusterRead: true

  # Secret access restriction (optional)
  # When enabled, restricts Secret access to only explicitly referenced names
  # This provides enhanced security but requires operational overhead to maintain
  # See examples/values-secret-restriction.yaml for configuration examples
  secretRestriction:
    # Enable Secret access restriction using resourceNames
    enabled: false
    # List of Secret names the operator is allowed to access
    # When empty, operator can access all Secrets in namespace (default behavior)
    # When populated, operator can only access Secrets listed here
    # Note: This requires manual maintenance when new Secrets are referenced
    allowedSecrets: []
    # Cross-namespace Secret access (only applies when preset is 'scoped' or 'cluster-admin')
    # Maps namespace -> list of allowed Secret names
    crossNamespaceSecrets: {}

# CRDs will be delivered under crds/ in the chart (added later)
