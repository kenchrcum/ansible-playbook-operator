# Example Helm values for production deployment with image pinning
# This file demonstrates production-ready configuration with digest pinning

# Operator image configuration with digest pinning
operator:
  image:
    repository: kenchrcum/ansible-playbook-operator
    tag: "0.1.5"
    # Production digest - replace with actual digest from your registry
    digest: "sha256:1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef"
    pullPolicy: IfNotPresent
  resources:
    requests:
      cpu: 200m
      memory: 256Mi
    limits:
      cpu: 1000m
      memory: 1Gi
  leaderElection: true
  watch:
    scope: all  # Production often needs cluster-wide access
  metrics:
    enabled: true
    serviceMonitor:
      enabled: true
  serviceAccount:
    create: true
    name: ""

# Default executor image configuration with digest pinning
executorDefaults:
  image:
    repository: kenchrcum/ansible-runner
    tag: 13
    # Production digest - replace with actual digest from your registry
    digest: "sha256:abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890"
    pullPolicy: IfNotPresent
  cache:
    strategy: pvc
    pvcName: "ansible-cache"
    createPVC: true
    storageSize: "50Gi"
    storageClassName: "fast-ssd"

# RBAC configuration for production
rbac:
  preset: scoped  # Production often needs cross-namespace access
  clusterRead: true

# Usage:
# helm install ansible-operator ./helm/ansible-playbook-operator \
#   --values examples/values-production-pinning.yaml \
#   --namespace ansible-operator-system \
#   --create-namespace
