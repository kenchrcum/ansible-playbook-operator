---
globs: "examples/**/*.yaml,helm/**/*.yaml"
description: "Simplified namespace deployment strategy and examples for the operator."
---
# Namespace Deployment Strategy

## Simplified Approach
The operator supports two clear deployment modes to avoid complexity:

### Single-Namespace Mode (`scope: namespace`)
- **Configuration**: `operator.watch.scope: namespace`
- **RBAC**: `rbac.preset: minimal` (default)
- **Use cases**:
  - Isolated deployments
  - Development/testing environments
  - Multi-tenant scenarios where each tenant gets their own operator
- **Security**: Maximum isolation, least privilege
- **Limitations**: Cannot access resources in other namespaces

### Cluster-Wide Mode (`scope: all`)
- **Configuration**: `operator.watch.scope: all`
- **RBAC**: `rbac.preset: scoped` (recommended)
- **Use cases**:
  - Centralized DevOps/Platform teams
  - Environments requiring cross-namespace resource sharing
  - Single team managing all Ansible automation
- **Security**: Cross-namespace access, higher privilege requirements
- **Advantages**: Single operator instance, centralized management

## Example Files
- [examples/values-namespace-watch.yaml](mdc:examples/values-namespace-watch.yaml): Single-namespace configuration
- [examples/values-cluster-watch.yaml](mdc:examples/values-cluster-watch.yaml): Cluster-wide configuration with comprehensive guidance
- [examples/values-rbac-presets.yaml](mdc:examples/values-rbac-presets.yaml): RBAC preset documentation and examples

## Terminology
- **Avoid**: "multi-namespace" terminology
- **Use**: "cluster-wide" for `scope: all` deployments
- **Use**: "single-namespace" for `scope: namespace` deployments

## Documentation Standards
- Examples must include comprehensive operational guidance
- Provide deployment commands and troubleshooting sections
- Document security considerations and trade-offs
- Include practical use case scenarios
- Maintain consistency in terminology across all files

## Migration Guidance
- Start with single-namespace mode for new deployments
- Upgrade to cluster-wide only when cross-namespace access is required
- Document business justification for cluster-wide deployments
- Test RBAC permissions thoroughly before production deployment
